LogDebug: Action_StartPrimary started
LogDebug: Action_CreateDirectoryAndShare started
LogDebug: Creating LocalBackupDirectory: C:\Test\LocalBackup
LogDebug: Setting Full control for folder to Authenticated Users
LogDebug: Creating LocalRestoreDirectory: C:\Test\LocalRestore
LogDebug: Setting Full control for folder to Authenticated Users
LogDebug: Creating LocalShareDirectory C:\Test\LocalRestore and LocalShare W12R2_SQL14_1Share
LogDebug: Setting Full control for folder to Authenticated Users
LogDebug: Test file written C:\Test\Share\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\Share\DirectoryTestFile.txt deleted.
LogInfo: Trying to test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share.
LogDebug: Writing file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file written \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt deleted.
LogInfo: Test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share succeeded.
LogDebug: Action_CreateDirectoryAndShare ended
LogDebug: Action_StartInitialServerState ended.
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogWarning: Did not switch TestMirror1 as role NotSet is unknown.
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogWarning: Did not switch TestMirror2 as role NotSet is unknown.
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogWarning: Server has no principal or mirror database. Investigate what went wrong.
LogInfo: Server state changed from INITIAL_STATE to PRIMARY_STARTUP_STATE.
LogDebug: Active state set to PRIMARY_STARTUP_STATE.
LogDebug: StartStartupState starting
LogDebug: Checking Sql Agent SQLSERVERAGENT with display name SQL Server Agent (MSSQLSERVER)
LogDebug: Test file written C:\Test\LocalBackup\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\LocalBackup\DirectoryTestFile.txt deleted.
LogDebug: Test file written C:\Test\LocalRestore\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\LocalRestore\DirectoryTestFile.txt deleted.
LogDebug: Test file written C:\Test\Share\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\Share\DirectoryTestFile.txt deleted.
LogDebug: Action_StartUpMirrorCheck starting
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogWarning: Database TestMirror1 is not set up for mirroring but is in configuration
LogDebug: Setting Full control for folder to Authenticated Users
LogInfo: Full backup of TestMirror1 done
LogDebug: Test file written C:\Test\LocalBackup\TestMirror1\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\LocalBackup\TestMirror1\DirectoryTestFile.txt deleted.
LogDebug: Setting Full control for folder to Authenticated Users
LogDebug: Test file written C:\Test\Share\LocalTransfer\TestMirror1\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\Share\LocalTransfer\TestMirror1\DirectoryTestFile.txt deleted.
LogInfo: Trying to test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share.
LogDebug: Writing file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file written \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt deleted.
LogInfo: Test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share succeeded.
LogDebug: Trying to copy file TestMirror1_131029806613077382.bak from C:\Test\LocalBackup\TestMirror1 to C:\Test\Share\LocalTransfer\TestMirror1.
LogInfo: Copied file TestMirror1_131029806613077382.bak from C:\Test\LocalBackup\TestMirror1 to C:\Test\Share\LocalTransfer\TestMirror1.
LogInfo: No access to remote server.
LogDebug: No access to remote server
LogInfo: Backup created and moved to local share due to missing access to remote share
LogInfo: No access to remote server.
LogWarning: Could not start mirroring as remote server is it not possible to connect to. If this is first run on primary without a secondary set up this should happen.
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogWarning: Database TestMirror2 is not set up for mirroring but is in configuration
LogDebug: Database TestMirror2 has enabled service broker
LogDebug: Creating directory C:\Test\LocalBackup\TestMirror2.
LogDebug: Setting Full control for folder to Authenticated Users
LogInfo: Full backup of TestMirror2 done
LogDebug: Test file written C:\Test\LocalBackup\TestMirror2\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\LocalBackup\TestMirror2\DirectoryTestFile.txt deleted.
LogDebug: Creating directory C:\Test\Share\LocalTransfer\TestMirror2.
LogDebug: Setting Full control for folder to Authenticated Users
LogDebug: Test file written C:\Test\Share\LocalTransfer\TestMirror2\DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Test file C:\Test\Share\LocalTransfer\TestMirror2\DirectoryTestFile.txt deleted.
LogInfo: Trying to test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share.
LogDebug: Writing file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file written \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Lines read from testfile correct.
LogDebug: Reading file to Uri \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt comprised of \\W12R2-SQL14-1\W12R2_SQL14_1Share and \DirectoryTestFile.txt.
LogDebug: Test file \\W12R2-SQL14-1\W12R2_SQL14_1Share\DirectoryTestFile.txt deleted.
LogInfo: Test unc \\W12R2-SQL14-1\W12R2_SQL14_1Share succeeded.
LogDebug: Trying to copy file TestMirror2_131029806619640186.bak from C:\Test\LocalBackup\TestMirror2 to C:\Test\Share\LocalTransfer\TestMirror2.
LogInfo: Copied file TestMirror2_131029806619640186.bak from C:\Test\LocalBackup\TestMirror2 to C:\Test\Share\LocalTransfer\TestMirror2.
LogInfo: No access to remote server.
LogDebug: No access to remote server
LogInfo: Backup created and moved to local share due to missing access to remote share
LogInfo: No access to remote server.
LogWarning: Could not start mirroring as remote server is it not possible to connect to. If this is first run on primary without a secondary set up this should happen.
LogDebug: Action_StartUpMirrorCheck ended
LogDebug: Information_GetDatabaseMirringRole started
LogDebug: Information_GetDatabaseMirringRole ended with value DBNull
LogError: Primary Startup State could not be started.
Exception Message: Failover failed for TestMirror1
Exception StackTrace:    at MirrorLib.SqlServerInstance.Action_SwitchOverAllDatabasesIfPossible(Boolean failoverPrincipal, Boolean failIfNotSwitchingOver)
   at MirrorLib.SqlServerInstance.Action_StartPrimaryStartupState()
LogInfo: Server state changed from PRIMARY_STARTUP_STATE to PRIMARY_SHUTTING_DOWN_STATE.
LogDebug: Active state set to PRIMARY_SHUTTING_DOWN_STATE.
LogDebug: StartShuttingDownState starting
LogDebug: StartShuttingDownState ended
LogInfo: Server state changed from PRIMARY_SHUTTING_DOWN_STATE to PRIMARY_SHUTDOWN_STATE.
LogDebug: Active state set to PRIMARY_SHUTDOWN_STATE.
LogDebug: StartShutdownState starting
LogDebug: StartShutdownState ended
